# 189. è½®è½¬æ•°ç»„

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/rotate-array/)

## æ¨å¯¼æ³•

é¢˜ç›®è¦æ±‚ç©ºé—´å¤æ‚åº¦`O(1)`ï¼Œé‚£æˆ‘ä»¬å°±ä¸èƒ½å¦å¼€ç©ºé—´ï¼Œç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ“ä½œã€‚

é¡ºåºæ¨å¯¼ï¼Œé¦–å…ˆè®¡ç®—æœ€å°‘è¦ç§»åŠ¨çš„æ¬¡æ•°`k%nums.size`ï¼Œç„¶åæŒ‰é¡ºåºæ›¿æ¢ä½ç½®ã€‚

å¯ä»¥å‘ç°ï¼Œåœ¨ä½ç½®æ•°å­—æ›¿æ¢æ—¶ï¼Œå¾ªç¯å¾€åæ›¿æ¢æ—¶ï¼Œæœ€ç»ˆå›å›åˆ°æœ€åˆçš„ä½ç½®ã€‚è€Œå¾ªç¯çš„æ¬¡æ•°åˆ™æ˜¯*æœ€å°‘è¦ç§»åŠ¨çš„æ¬¡æ•°*å’Œ*æ•°ç»„é•¿åº¦*çš„æœ€å¤§å…¬çº¦æ•°ã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun rotate(nums: IntArray, k: Int) {
        val size = nums.size
        val mv = k % size
        val times = gcd(mv, size)
        for (index in 0 until times) {
            var curIndex = index
            var temp = nums[curIndex]
            do {
                val nextIndex = (curIndex + mv) % size
                val nextValue = nums[nextIndex]
                nums[nextIndex] = temp
                temp = nextValue
                curIndex = nextIndex
            } while (curIndex != index)
        }
    }

    /**
     * è¾—è½¬ç›¸é™¤æ³• æœ€å¤§å…¬çº¦æ•°
     */
    private fun gcd(x: Int, y: Int): Int {
        return if (y == 0) x else gcd(y, x % y)
    }
}
```

## æ•°ç»„ç¿»è½¬æ³•

æˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œæ•°ç»„å¾€åæ¨åŠ¨äº†mä½ï¼Œå°±æ˜¯æŠŠæ•°ç»„åŸæ¥mä½æ”¾åˆ°äº†å¤´éƒ¨ã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š

- æŠŠæ•°ç»„ç¿»è½¬ï¼›
- æŠŠå‰é¢mä½ç¿»è½¬ï¼›
- æŠŠåé¢ä½æ•°ä¹Ÿç¿»è½¬

ç¤ºä¾‹ç§»åŠ¨3ä½ï¼š

| æ“ä½œ           | ç»“æœ            |
|--------------|---------------|
| åŸå§‹æ•°ç»„         | 1 2 3 4 5 6 7 |
| ç¿»è½¬æ‰€æœ‰å…ƒç´        | 7 6 5 4 3 2 1 |
| ç¿»è½¬[0,3)åŒºé—´çš„å…ƒç´  | 5 6 7 4 3 2 1 |
| ç¿»è½¬[3,7]åŒºé—´çš„å…ƒç´  | 5 6 7 1 2 3 4 |

è¿™æ ·å³å®Œæˆäº†å·¥ä½œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºè¦åœ¨åŸæ•°ç»„ä¸Šæ“ä½œï¼Œä¸å¯ç”¨æ•°ç»„ç¿»è½¬apiï¼Œä¼šæœ‰é¢å¤–ç©ºé—´æµªè´¹ï¼Œéœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun rotate(nums: IntArray, k: Int) {
        val size = nums.size
        val m = k % size
        if (m != 0) {
            reverse(nums, 0, size)
            reverse(nums, 0, m)
            reverse(nums, m, size)
        }
    }

    /**
     * ç¿»è½¬æ•°ç»„åŒºåŸŸ
     */
    private fun reverse(nums: IntArray, start: Int, end: Int) {
        var startIndex = start
        var endIndex = end - 1
        while (startIndex < endIndex) {
            val temp = nums[startIndex]
            nums[startIndex] = nums[endIndex]
            nums[endIndex] = temp
            startIndex++
            endIndex--
        }
    }
}
```