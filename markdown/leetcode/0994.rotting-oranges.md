# 994. è…çƒ‚çš„æ©˜å­

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/rotting-oranges/)

## BFS

ä»æ‰€æœ‰çƒ‚æ©˜å­å¼€å§‹BFSï¼Œå‘ç°æœ‰æ–°é²œçš„æ©˜å­è½¬æ¢ä¸ºçƒ‚æ©˜å­å¹¶æ”¾å…¥é˜Ÿåˆ—ç­‰å¾…ä¸‹æ¬¡æœç´¢ã€‚æ¯æ¬¡åŠ æ·±æ·±åº¦è®°å½•ä¸ºæ—¶é—´ã€‚

å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œåˆ¤æ–­è¿˜æœ‰æ²¡æœ‰æ–°é²œæ©˜å­ï¼Œæœ‰çš„è¯è¿”å›-1ï¼Œæ²¡æœ‰çš„è¯è¿”å›æ·±åº¦ã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun orangesRotting(grid: Array<IntArray>): Int {
        val x = grid.size
        val y = grid[0].size

        // æ·±åº¦æœç´¢é˜Ÿåˆ—
        val queue = ArrayDeque<IntArray>()

        // è®°å½•å¥½çš„æ€»æ•°ç”¨ä»¥åˆ¤æ–­
        var good = 0

        for (i in grid.indices) {
            for (j in grid[i].indices) {
                if (grid[i][j] == 2) {
                    // ä»£è¡¨åæ ‡ + æ·±åº¦
                    queue.add(intArrayOf(i, j, 0))
                } else if (grid[i][j] == 1) {
                    good++
                }
            }
        }

        // æœç´¢æ–¹å‘
        val sf = arrayOf(intArrayOf(0, 1), intArrayOf(0, -1), intArrayOf(1, 0), intArrayOf(-1, 0))

        var deep = 0

        while (queue.isNotEmpty()) {
            val point = queue.removeFirst()
            for (di in sf) {
                val newI = point[0] + di[0]
                val newJ = point[1] + di[1]
                if (
                    newI < 0 ||
                    newI >= x ||
                    newJ < 0 ||
                    newJ >= y ||
                    grid[newI][newJ] != 1
                ) {
                    continue
                }

                grid[newI][newJ] = 2
                val nowDeep = point[2] + 1
                queue.add(intArrayOf(newI, newJ, nowDeep))
                deep = deep.coerceAtLeast(nowDeep)
                good--
            }
        }

        // åˆ¤æ–­è¿˜æœ‰æ²¡æœ‰æ–°é²œçš„
        // for (i in grid.indices) {
        //     for (j in grid[i].indices) {
        //         if (grid[i][j] == 1) {
        //             return -1
        //         }
        //     }
        // }

        // ç”¨goodåˆ¤æ–­è¿˜æœ‰æ²¡æœ‰å¥½çš„ å°‘ä¸€æ¬¡éå†
        return if (good > 0) -1 else deep
    }
}
```
