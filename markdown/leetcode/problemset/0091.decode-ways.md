# 91. è§£ç æ–¹æ³•

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/decode-ways/)

åŠ¨æ€è§„åˆ’ã€‚

è®¾`dp[i]`ä»£è¡¨åˆ°iä¸‹æ ‡çš„è§£æ³•æ€»æ•°ï¼Œå­˜åœ¨`dp[0]=1`ï¼Œä¸”ï¼š

- `s[i-1]==0`ï¼Œ`dp[i] = dp[i-1]`
- `s[i-1]==1`:
    - `s[i]==0`ï¼Œ`dp[i] = dp[i-2]`ï¼Œå½“å‰ä¸º0å¿…é¡»å’Œå‰é¢çš„æ•°å­—ç»„åˆï¼Œæ‰€ä»¥å½“å‰ä¸i-2ä¸€è‡´
    - `s[i]==1..9`ï¼Œ`dp[i] = dp[i-1] + dp[i-2]`ï¼Œå½“å‰æ•°å­—å¯ä»¥åœ¨åœ¨å‰é¢çš„ä¸Šé¢æœ‰`dp[i-1]`ï¼Œä¹Ÿå¯ä»¥å’Œå‰ä¸€ä¸ªç»„åˆæœ‰`dp[i-2]`
- `s[i-1]==2`ï¼š
    - `s[i]==0`ï¼Œ`dp[i] = dp[i-2]`
    - `s[i]==1..6`ï¼Œ`dp[i] = dp[i-1] + dp[i-2]`
    - `s[i]==7..9`ï¼Œ`dp[i] = dp[i-1]`
- å…¶ä»–ï¼Œ`dp[i] = dp[i-1]`

æ³¨æ„è¾“å…¥å¯èƒ½æ˜¯éæ³•çš„æ•°å­—ï¼Œå‡ºç°æœ‰0çš„ä½ç½®éœ€è¦åšåˆ¤æ–­ã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun numDecodings(s: String): Int {
        if (s[0] == '0') {
            // 0å¼€å¤´çš„ä¸å¯¹
            return 0
        }
        val dp = IntArray(s.length)
        dp[0] = 1
        for (i in 1 until s.length) {
            val before = s[i - 1]
            val now = s[i]
            if (now == '0') {
                if (before !in '1'..'2') {
                    // 0å‰é¢ä¸æ˜¯1æˆ–2ä¸å¯¹
                    return 0
                }
            }
            if (before == '0') {
                dp[i] = dp[i - 1]
            } else if (before == '1') {
                if (i == 1) {
                    dp[1] = if (now == '0') 1 else 2
                } else {
                    dp[i] = if (now == '0') dp[i - 2] else dp[i - 1] + dp[i - 2]
                }
            } else if (before == '2') {
                if (now in '0'..'6') {
                    if (i == 1) {
                        dp[1] = if (now == '0') 1 else 2
                    } else {
                        dp[i] = if (now == '0') dp[i - 2] else dp[i - 1] + dp[i - 2]
                    }
                } else {
                    dp[i] = dp[i - 1]
                }
            } else {
                dp[i] = dp[i - 1]
            }
        }
        return dp[s.length - 1]
    }
}
```
