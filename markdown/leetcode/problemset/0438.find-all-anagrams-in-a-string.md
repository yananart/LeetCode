# 438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/)

æ»‘åŠ¨çª—å£ã€‚

é€»è¾‘å¯å‚è€ƒï¼š[é¢˜567](0567.permutation-in-string.md)

ä¼˜åŒ–ç‚¹ï¼Œå½“å‘ç°çª—å£å·¦å³å­—ç¬¦ä¸€æ ·æ˜¯ï¼Œä¸ç”¨æ“ä½œå¤„ç†ã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun findAnagrams(s: String, p: String): List<Int> {
        val res = ArrayList<Int>()
        if (p.length > s.length) {
            return res
        }

        val pLetterSum = countLetter(p)
        var left = 0
        var right = p.length
        val nowLetterSum = countLetter(s.substring(left, right))

        if (pLetterSum.contentEquals(nowLetterSum)) {
            res.add(left)
        }

        while (right < s.length) {
            val leftCh = s[left]
            val rightCh = s[right]
            if (leftCh != rightCh) {
                nowLetterSum[leftCh - 'a'] -= 1
                nowLetterSum[rightCh - 'a'] += 1
            }
            if (pLetterSum.contentEquals(nowLetterSum)) {
                res.add(left + 1)
            }
            left++
            right++
        }

        return res
    }

    /**
     * ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²å„ä¸ªå­—æ¯æ•°é‡
     */
    private fun countLetter(s: String): Array<Int> {
        val letterSum = Array(26) { 0 }
        for (ch in s.toCharArray()) {
            letterSum[ch - 'a'] += 1
        }
        return letterSum
    }
}
```
