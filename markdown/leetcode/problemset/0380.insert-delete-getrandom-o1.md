# 380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ 

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/insert-delete-getrandom-o1/)

ç”¨mapå­˜å‚¨å®ç°`O(1)`ï¼Œç”¨æ•°ç»„å­˜å‚¨å¯éšæœºã€‚

```kotlin
import kotlin.random.Random

/**
 * @author Yananart
 */
class RandomizedSet {
    companion object {
        val nums = IntArray(200010)
    }

    private val map = HashMap<Int, Int>()
    private var idx = -1

    fun insert(`val`: Int): Boolean {
        if (map.containsKey(`val`)) return false
        nums[++idx] = `val`
        map[`val`] = idx
        return true
    }

    fun remove(`val`: Int): Boolean {
        if (!map.containsKey(`val`)) return false
        val loc = map.remove(`val`)!!
        if (loc != idx) map[nums[idx]] = loc
        nums[loc] = nums[idx--]
        return true
    }

    fun getRandom(): Int {
        return nums[Random.nextInt(idx + 1)]
    }
}
```
