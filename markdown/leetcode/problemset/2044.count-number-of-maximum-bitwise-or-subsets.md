# 2044. ç»Ÿè®¡æŒ‰ä½æˆ–èƒ½å¾—åˆ°æœ€å¤§å€¼çš„å­é›†æ•°ç›®

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/count-number-of-maximum-bitwise-or-subsets/)

## æšä¸¾

é›†åˆä¸­æŒ‰ä½æˆ–çš„æœ€å¤§å€¼ä¸€å®šæ˜¯ç­‰äºæ‰€æœ‰å€¼çš„æˆ–è¿ç®—ç»“æœçš„ï¼Œé¦–å…ˆç®—å‡ºç»“æœæœ€å¤§å€¼ã€‚

æšä¸¾æ‰€æœ‰å­é›†å‡ºç°çš„æƒ…å†µï¼ŒæŸ¥çœ‹å­é›†æˆ–è¿ç®—ç»“æœæ˜¯å¦ç¬¦åˆæœ€å¤§å€¼ï¼Œæ—¶é—´å¤æ‚åº¦`O(2^n)`ã€‚

æšä¸¾æ‰€æœ‰å­é›†çš„æƒ…å†µï¼Œå¯ç”¨ç”¨äºŒè¿›åˆ¶æ•°å­—è¡¨ç¤ºï¼Œé¢˜ç›®ä¸­é›†åˆå¤§å°æœ€å¤§ä¸º16ï¼Œé‚£ç”¨ä¸€ä¸ªé•¿åº¦ä¸º16çš„äºŒè¿›åˆ¶æ•°å°±å¯ä»¥è¡¨ç¤ºã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun countMaxOrSubsets(nums: IntArray): Int {
        // è®¡ç®—ç»“æœæœ€å¤§å€¼
        var orMax = 0
        for (item in nums) {
            orMax = orMax.or(item)
        }

        var res = 0
        // æšä¸¾æ‰€æœ‰æƒ…å†µ
        for (em in 0 until 1.shl(nums.size)) {
            var orRes = 0
            for (index in nums.indices) {
                if (em.shr(index).and(1) == 1) {
                    orRes = orRes.or(nums[index])
                }
            }
            if (orRes == orMax) {
                res++
            }
        }
        return res
    }
}
```

## DFS

æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢çš„è¿‡ç¨‹è½¬ä¸ºDFSæ€è€ƒï¼Œæ¯ä¸ªæ•°å­—ä½œä¸ºèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œå°±æ˜¯é€‰ç”¨æˆ–è€…ä¸é€‰ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ­¤å»ºç«‹ä¸€é¢—äºŒå‰æ ‘è¿›è¡Œå¤„ç†ã€‚

ä¼˜åŒ–ï¼šå¯¹äºè®¡ç®—åˆ°æŸä¸ªèŠ‚ç‚¹æ—¶å·²ç»ç­‰äºæœ€å¤§å€¼äº†ï¼Œå¯ä»¥ä¸å†å¾€ä¸‹éå†ã€‚

```kotlin
/**
 * @author Yananart
 */
class Solution {
    fun countMaxOrSubsets(nums: IntArray): Int {
        // è®¡ç®—ç»“æœæœ€å¤§å€¼
        var orMax = 0
        for (item in nums) {
            orMax = orMax.or(item)
        }

        return dfs(nums, 0, orMax, 0)
    }

    private fun dfs(nums: IntArray, nowIndex: Int, target: Int, orRes: Int): Int {
        if (orRes == target) {
            return 1.shl(nums.size - nowIndex)
        }
        if (nowIndex == nums.size) {
            // åˆ°æœ€åäº†åˆ¤æ–­
            return 0
        }
        // ä½¿ç”¨å½“å‰å€¼
        val use = dfs(nums, nowIndex + 1, target, orRes.or(nums[nowIndex]))
        // ä¸ä½¿ç”¨å½“å‰å€¼
        val notUse = dfs(nums, nowIndex + 1, target, orRes)
        return use + notUse
    }
}
```
