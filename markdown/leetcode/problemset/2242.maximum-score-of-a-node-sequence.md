# 2242. èŠ‚ç‚¹åºåˆ—çš„æœ€å¤§å¾—åˆ†

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/maximum-score-of-a-node-sequence/)

å›¾çš„æšä¸¾ã€‚

æŒ‰è¾¹æšä¸¾ï¼Œæ¯æ¬¡å–åˆ°ä¸€æ¡è¾¹åï¼Œå–å…¶ä¸¤ç‚¹(è®¾ä¸ºp2ã€p3)å…³è”çš„å…¶ä»–èŠ‚ç‚¹ä¸­æƒé‡æœ€å¤§çš„ï¼Œä¸èƒ½å–åˆ°é‡å¤çš„ç‚¹ã€‚

å­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œå…ˆå–p2å…³è”çš„èŠ‚ç‚¹p1ï¼Œå–åˆ°p1æƒé‡æœ€å¤§ï¼Œå†å–p3å…³è”èŠ‚ç‚¹p4æœ€å¤§æƒé‡(ä¸èƒ½ä¹Ÿæ˜¯p1)ï¼Œç„¶ååè¿‡æ¥å…ˆæ“ä½œp4ã€‚

ä¸ºäº†å¯ä»¥æ›´å¿«å–åˆ°æ¯ä¸ªèŠ‚ç‚¹å…³è”çš„æœ€å¤§çš„æƒé‡ï¼Œåœ¨æ„å»ºå…³è”å…³ç³»åå¯¹å…³è”çš„ç‚¹æŒ‰æƒé‡æ’åº(å®æ—¶éå†å–æœ€å¤§ä¼šè¶…æ—¶)ã€‚

```kotlin
import kotlin.math.max

/**
 * @author Yananart
 */
class Solution {
    /**
     * èŠ‚ç‚¹åºåˆ—çš„æœ€å¤§å¾—åˆ†
     */
    fun maximumScore(scores: IntArray, edges: Array<IntArray>): Int {
        val relation = Array<ArrayList<Int>>(scores.size) { ArrayList() }
        for (edge in edges) {
            relation[edge[0]].add(edge[1])
            relation[edge[1]].add(edge[0])
        }
        for (item in relation) {
            // æ‰€æœ‰å…³è”èŠ‚ç‚¹æŒ‰æƒé‡å¤§åˆ°å°æ’åº
            item.sortBy { -scores[it] }
        }
        var res = -1
        for (edge in edges) {
            val p2 = edge[0]
            val p3 = edge[1]
            // ä»»ä¸€ä¸ªç‚¹åªæœ‰ä¸€ä¸ªå…³è”ç‚¹çš„è¯ä¸å¯èƒ½å­˜åœ¨
            if (relation[p2].size < 2 || relation[p3].size < 2) continue
            // ä¼˜å…ˆæ‰¾p1 å’Œ p4
            res = max(res, find(p2, p3, scores, relation))
            res = max(res, find(p3, p2, scores, relation))
        }
        return res
    }
    
    private fun find(p2: Int, p3: Int, scores: IntArray, relation: Array<ArrayList<Int>>): Int {
        // ä¼˜å…ˆæ‰¾p1 å–æƒé‡æœ€å¤§çš„
        var maxP1 = 0
        var maxP1Score = 0
        for (p1 in relation[p2]) {
            if (p1 == p3) continue
            maxP1 = p1
            maxP1Score = scores[p1]
            break
        }
        var maxP4Score = 0
        for (p4 in relation[p3]) {
            if (p4 == p2) continue
            if (p4 == maxP1) continue
            maxP4Score = scores[p4]
            break
        }
        return if (maxP4Score == 0) -1
        else maxP1Score + scores[p2] + scores[p3] + maxP4Score
    }
}
```
