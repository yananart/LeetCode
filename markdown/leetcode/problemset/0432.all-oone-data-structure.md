# 432. å…¨ O(1) çš„æ•°æ®ç»“æ„

- [ğŸ”—é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/all-oone-data-structure/)

æ•°æ®ç»“æ„é¢˜ï¼Œç”¨ä¸€ä¸ªå“ˆå¸Œå­˜æ•°æ®ï¼Œæ¯æ¬¡æ“ä½œååˆ¤æ–­æœ€å¤šå’Œæœ€å°çš„ã€‚

```kotlin
/**
 * @author Yananart
 */
class AllOne {
    /**
     * æœ€å¤§çš„
     */
    private var maxKey = ""

    /**
     * æœ€å°çš„
     */
    private var minKey = ""

    private var allKey = HashMap<String, Int>()

    fun inc(key: String) {
        allKey[key] = (allKey[key] ?: 0) + 1
        makeKey()
    }

    fun dec(key: String) {
        if (allKey.containsKey(key)) {
            val num = allKey[key]
            if (num == 1) {
                allKey.remove(key)
            } else {
                allKey[key] = num!! - 1
            }
            makeKey()
        }
    }

    fun getMaxKey(): String {
        return maxKey
    }

    fun getMinKey(): String {
        return minKey
    }

    private fun makeKey() {
        var max = 0
        var min = Int.MAX_VALUE
        minKey = ""
        maxKey = ""
        for ((key, value) in allKey) {
            if (max < value) {
                max = value
                maxKey = key
            }
            if (min > value) {
                min = value
                minKey = key
            }
        }
    }
}
```
